{"mappings":"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","sources":["./src/components/timer/timer__class.ts","./src/components/timer/timer.ts"],"sourcesContent":["export { iDestructible, iTimer, iTimerToggleble, iTimerPauseble, ArrayOfDestructible }\r\n\r\ninterface iDestructible {\r\n  destruct: () => void;\r\n}\r\ninterface iTimer {\r\n  play(): void;\r\n  stop(): void;\r\n}\r\ninterface iTimerToggleble extends iTimer {\r\n  playPauseToggle(): void;\r\n}\r\ninterface iTimerPauseble extends iTimer {\r\n  pause(): void;\r\n}\r\ntype ArrayOfDestructible = [() => void, ...Array<iDestructible>];\r\n\r\nexport default class Timer implements iDestructible, iTimer, iTimerToggleble, iTimerPauseble{\r\n  protected readonly SEC = 1000;\r\n  protected readonly MIN = 60 * this.SEC;\r\n  protected readonly HOU = 60 * this.MIN;\r\n\r\n  protected countedTime: Date;\r\n  protected lastStartTime: Date;\r\n  protected isActive: boolean;\r\n  protected idInterval: number | null;\r\n  protected readonly selfElement: Element;\r\n\r\n  private readonly buttonPlayPauseToggle: Element;\r\n  private readonly buttonStop: Element;\r\n  private readonly outputElement: Element | HTMLInputElement;\r\n  private readonly bindedPlayPauseToggle = this.playPauseToggle.bind(this);\r\n  private readonly bindedStop = this.stop.bind(this);\r\n  constructor(element: Element) {\r\n    let temp = element.querySelector('.timer__button-play_pause');\r\n    if (!temp) throw new ReferenceError(\r\n      `not elem \".timer__button-play_pause\" in tag: ${element.tagName} class: ${element.classList.toString}`);\r\n    this.buttonPlayPauseToggle = temp;\r\n\r\n    temp = element.querySelector('.timer__button-stop');\r\n    if (!temp) throw new ReferenceError(\r\n      `not elem \".timer__button-stop\" in tag: ${element.tagName} class: ${element.classList.toString}`);\r\n    this.buttonStop = temp;\r\n\r\n    temp = element.querySelector('.timer__input');\r\n    if (!temp) throw new ReferenceError(\r\n      `not elem \".timer__input\" in tag: ${element.tagName} class: ${element.classList.toString}`);\r\n    this.outputElement = temp;\r\n\r\n    this.selfElement = element;\r\n    this.countedTime = new Date(0);\r\n    this.lastStartTime = new Date();\r\n    this.isActive = false;\r\n    this.idInterval = null;\r\n\r\n    this.buttonPlayPauseToggle.addEventListener('click', this.bindedPlayPauseToggle);\r\n    this.buttonStop.addEventListener('click', this.bindedStop);\r\n  }\r\n  play() {\r\n    if (!isNaN(this.idInterval!))\r\n      clearInterval(this.idInterval!);\r\n    this.lastStartTime.setTime(Date.now());\r\n    this.isActive = true;\r\n    this.idInterval = setInterval(this.tick.bind(this), 1000);\r\n    setTimeout((() => this.selfElement.classList.add('timer-active')).bind(this), 0);\r\n  }\r\n  pause() {\r\n    this.isActive = false;\r\n    this.countedTime.setTime(Date.now() - this.lastStartTime.getTime() + this.countedTime.getTime());\r\n    if (!isNaN(this.idInterval!))\r\n      clearInterval(this.idInterval!);\r\n    setTimeout((() => this.selfElement.classList.remove('timer-active')).bind(this), 0);\r\n  }\r\n  private tick() {\r\n    let lengthTime = Date.now();\r\n    if (!this.isActive) return;\r\n\r\n    setTimeout((() => {\r\n      lengthTime += this.countedTime.getTime() - this.lastStartTime.getTime();\r\n      let temp = Math.trunc((lengthTime % this.MIN) / this.SEC);\r\n      let lengthTimeStr = temp.toString().padStart(2, '0');\r\n      if (lengthTime / this.MIN >= 1) {\r\n        lengthTime -= temp;\r\n        temp = Math.trunc((lengthTime % this.HOU) / this.MIN);\r\n        lengthTimeStr = temp.toString().padStart(2, '0') + ':' + lengthTimeStr;\r\n        if (lengthTime / this.HOU >= 1) {\r\n          lengthTime -= temp;\r\n          temp = Math.trunc(lengthTime / this.HOU);\r\n          lengthTimeStr = temp.toString().padStart(2, '0') + ':' + lengthTimeStr;\r\n        }\r\n      }\r\n      setTimeout(this.render.bind(this), 0, lengthTimeStr);\r\n    }).bind(this), 0);\r\n  }\r\n  private render(time: string = '00') {\r\n    if ('value' in this.outputElement)\r\n      this.outputElement.value = time\r\n    else\r\n      this.outputElement.textContent = time;\r\n  }\r\n  playPauseToggle() {\r\n    if (this.isActive)\r\n      this.pause()\r\n    else\r\n      this.play();\r\n  }\r\n  stop() {\r\n    this.isActive = false;\r\n    if (!isNaN(this.idInterval!))\r\n      clearInterval(this.idInterval!);\r\n    this.countedTime.setTime(0);\r\n    setTimeout((() => this.selfElement.classList.remove('timer-active')).bind(this), 0);\r\n    setTimeout(this.render.bind(this), 0, '00');\r\n  }\r\n  destruct() {\r\n    this.stop();\r\n    this.buttonPlayPauseToggle.removeEventListener('click', this.bindedPlayPauseToggle);\r\n    this.buttonStop.removeEventListener('click', this.bindedStop);\r\n  }\r\n}","import Timer from './timer__class';\r\nimport * as timerInterfaces from './timer__class';\r\n\r\nconst arrayOfDestructible: timerInterfaces.ArrayOfDestructible = [\r\n  function () {\r\n    for (let i = 1; i < this.length; this[i++].destruct()) { }\r\n  },\r\n];\r\n\r\n(document as any).q = arrayOfDestructible;\r\n\r\ndocument.querySelectorAll('.timer').forEach(q => arrayOfDestructible.push((q as any).myTimer = new Timer(q)));"],"names":["Timer","constructor","element","SEC","MIN","playPauseToggle","bind","stop","temp","querySelector","ReferenceError","tagName","classList","toString","buttonPlayPauseToggle","buttonStop","outputElement","selfElement","countedTime","Date","lastStartTime","isActive","idInterval","addEventListener","bindedPlayPauseToggle","bindedStop","play","isNaN","clearInterval","setTime","now","setInterval","tick","setTimeout","add","pause","getTime","remove","lengthTime","Math","trunc","lengthTimeStr","padStart","HOU","render","time","value","textContent","destruct","removeEventListener","arrayOfDestructible","i","length","document","q","querySelectorAll","forEach","push","myTimer"],"version":3,"file":"timer.20a51de0.js.map"}